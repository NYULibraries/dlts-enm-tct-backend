
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="shortcut icon" href="../images/favicon.ico">
      
      <meta name="generator" content="mkdocs+mkdocs-material#1.0.3">
    
    
      
        <title>Adding A New Indexpattern - ENM Topic Curation Toolkit Backend Documentation</title>
      
    
    
      <script src="../assets/javascripts/modernizr-facb31f4a3.js"></script>
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-f3ab63f78a.css">
      
      
        <link rel="stylesheet" href="../stylesheets/otl_docs.css">
      
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="ENM Topic Curation Toolkit Backend Documentation" class=" md-logo  md-header-nav__button">
          
            <img src="../images/Logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Ingest
                </span>
              
            
            Adding A New Indexpattern
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            
          </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <i class=" md-logo  md-nav__button">
      
        <img src="../images/Logo.png">
      
    </i>
    ENM Topic Curation Toolkit Backend Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  <li class="md-nav__item">
    
      <a href=".." title="Home" class="md-nav__link">
        Home
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../installation/" title="Installation" class="md-nav__link">
        Installation
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../setup/" title="Setup" class="md-nav__link">
        Setup
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Ingest
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-3">
        Ingest
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../new/" title="Adding A New EPUB" class="md-nav__link">
        Adding A New EPUB
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Adding A New Indexpattern
      </label>
    
    <a href="./" title="Adding A New Indexpattern" class="md-nav__link md-nav__link--active">
      Adding A New Indexpattern
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#indexpattern-fields" title="Indexpattern Fields" class="md-nav__link">
    Indexpattern Fields
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#id" title="id" class="md-nav__link">
    id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#name" title="Name" class="md-nav__link">
    Name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description" title="Description" class="md-nav__link">
    Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xpath_entry" title="xpath_entry" class="md-nav__link">
    xpath_entry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subentry_classes" title="subentry_classes" class="md-nav__link">
    subentry_classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xpath_see" title="xpath_see" class="md-nav__link">
    xpath_see
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xpath_seealso" title="xpath_seealso" class="md-nav__link">
    xpath_seealso
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagenumber_pre_strings" title="pagenumber_pre_strings" class="md-nav__link">
    pagenumber_pre_strings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagenumber_xpath_pattern" title="pagenumber_xpath_pattern" class="md-nav__link">
    pagenumber_xpath_pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagenumber_css_selector_pattern" title="pagenumber_css_selector_pattern" class="md-nav__link">
    pagenumber_css_selector_pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagenumber_tag_pattern" title="pagenumber_tag_pattern" class="md-nav__link">
    pagenumber_tag_pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separator_between_entry_and_occurrences" title="separator_between_entry_and_occurrences" class="md-nav__link">
    separator_between_entry_and_occurrences
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xpath_occurrence_link" title="xpath_occurrence_link" class="md-nav__link">
    xpath_occurrence_link
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separator_before_first_subentry" title="separator_before_first_subentry" class="md-nav__link">
    separator_before_first_subentry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separator_between_subentries" title="separator_between_subentries" class="md-nav__link">
    separator_between_subentries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separator_between_sees" title="separator_between_sees" class="md-nav__link">
    separator_between_sees
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separator_see_subentry" title="separator_see_subentry" class="md-nav__link">
    separator_see_subentry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separator_between_seealsos" title="separator_between_seealsos" class="md-nav__link">
    separator_between_seealsos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inline_see_start" title="inline_see_start" class="md-nav__link">
    inline_see_start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inline_see_end" title="inline_see_end" class="md-nav__link">
    inline_see_end
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inline_see_also_start" title="inline_see_also_start" class="md-nav__link">
    inline_see_also_start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inline_see_also_end" title="inline_see_also_end" class="md-nav__link">
    inline_see_also_end
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indicators_of_occurence_range" title="indicators_of_occurence_range" class="md-nav__link">
    indicators_of_occurence_range
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see_split_string" title="see_split_string" class="md-nav__link">
    see_split_string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see_also_split_string" title="see_also_split_string" class="md-nav__link">
    see_also_split_string
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../testing/" title="Testing" class="md-nav__link">
        Testing
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      API
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5">
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../api/overview/" title="Overview" class="md-nav__link">
        Overview
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../api/topics/" title="Topics" class="md-nav__link">
        Topics
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../api/sources/" title="Sources" class="md-nav__link">
        Sources
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../credits/" title="Acknowledgements" class="md-nav__link">
        Acknowledgements
      </a>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#indexpattern-fields" title="Indexpattern Fields" class="md-nav__link">
    Indexpattern Fields
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#id" title="id" class="md-nav__link">
    id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#name" title="Name" class="md-nav__link">
    Name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description" title="Description" class="md-nav__link">
    Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xpath_entry" title="xpath_entry" class="md-nav__link">
    xpath_entry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subentry_classes" title="subentry_classes" class="md-nav__link">
    subentry_classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xpath_see" title="xpath_see" class="md-nav__link">
    xpath_see
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xpath_seealso" title="xpath_seealso" class="md-nav__link">
    xpath_seealso
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagenumber_pre_strings" title="pagenumber_pre_strings" class="md-nav__link">
    pagenumber_pre_strings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagenumber_xpath_pattern" title="pagenumber_xpath_pattern" class="md-nav__link">
    pagenumber_xpath_pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagenumber_css_selector_pattern" title="pagenumber_css_selector_pattern" class="md-nav__link">
    pagenumber_css_selector_pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagenumber_tag_pattern" title="pagenumber_tag_pattern" class="md-nav__link">
    pagenumber_tag_pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separator_between_entry_and_occurrences" title="separator_between_entry_and_occurrences" class="md-nav__link">
    separator_between_entry_and_occurrences
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xpath_occurrence_link" title="xpath_occurrence_link" class="md-nav__link">
    xpath_occurrence_link
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separator_before_first_subentry" title="separator_before_first_subentry" class="md-nav__link">
    separator_before_first_subentry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separator_between_subentries" title="separator_between_subentries" class="md-nav__link">
    separator_between_subentries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separator_between_sees" title="separator_between_sees" class="md-nav__link">
    separator_between_sees
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separator_see_subentry" title="separator_see_subentry" class="md-nav__link">
    separator_see_subentry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separator_between_seealsos" title="separator_between_seealsos" class="md-nav__link">
    separator_between_seealsos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inline_see_start" title="inline_see_start" class="md-nav__link">
    inline_see_start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inline_see_end" title="inline_see_end" class="md-nav__link">
    inline_see_end
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inline_see_also_start" title="inline_see_also_start" class="md-nav__link">
    inline_see_also_start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inline_see_also_end" title="inline_see_also_end" class="md-nav__link">
    inline_see_also_end
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indicators_of_occurence_range" title="indicators_of_occurence_range" class="md-nav__link">
    indicators_of_occurence_range
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see_split_string" title="see_split_string" class="md-nav__link">
    see_split_string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see_also_split_string" title="see_also_split_string" class="md-nav__link">
    see_also_split_string
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
              
                
                  <h1>Adding A New Indexpattern</h1>
                
                <p>Index patterns are used to extract data from the existing indexes, and describe how the various components appear in the index as provided, what are the signs of punctuation or markup used to identify entries, separate page numbers, indicate subentries, etc.</p>
<p>Adding a new Indexpattern is perhaps the most complicated part of configuring the <strong>ENM TCT Backend</strong>.  This page will explain the various fields in the Indexpattern model and how they might be configured for a new Indexpattern, but be aware that this process is often iterative and may require some trial and error to get the proper values.</p>
<h2 id="indexpattern-fields">Indexpattern Fields</h2>
<h3 id="id">id</h3>
<p><strong>Field Type</strong>: Integer</p>
<p>This is a unique, internal id for the Indexpattern.  It is, for the most part, not used by <strong>ENM TCT</strong>, as Indexpatterns are usually fetched by their "name" attribute, which is more likely to be consistent across implementations. However, if adding a new Indexpattern via the <code>indexpatterns.json</code> fixture, you <strong>must</strong> include a value for this field that is not used by a currently existing Indexpattern.</p>
<hr />
<h3 id="name">Name</h3>
<p><strong>Field Type</strong>: String</p>
<p>This string field must be unique within the database.  It is the primary means of fetching a specific Indexpattern from the database.</p>
<hr />
<h3 id="description">Description</h3>
<p><strong>Field Type</strong>: String</p>
<p>This is a longer, human-readable text description of the IndexPattern. This field does <strong>not</strong> have an enforced uniqueness, and is merely meant to help the editor choose the proper Indexpattern.</p>
<hr />
<h3 id="xpath_entry">xpath_entry</h3>
<p><strong>Field Type</strong>: String</p>
<p>XPath term used by lxml specifying a <strong>main</strong> entry nodes in the index.  For example, an EPUB with the following structure for an index entry:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;indexmain&quot;</span><span class="nt">&gt;</span>Washington, George, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;nounder&quot;</span> <span class="na">href=</span><span class="s">&quot;ch03.html#page_73&quot;</span><span class="nt">&gt;</span>73<span class="nt">&lt;/a&gt;</span><span class="ni">&amp;#8211;</span>85<span class="nt">&lt;/p&gt;</span>
</pre></div>


<p>would have a value of <code>p[@class="indexmain"]</code> for <strong>xpath_entry</strong>.</p>
<hr />
<h3 id="subentry_classes">subentry_classes</h3>
<p><strong>Field Type</strong>: Array (string)</p>
<p>A list of classes used to indicate a subentry in the index, specifically for indexes with separate line subentries.  For example, an index with the following subentry:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;indexsub&quot;</span><span class="nt">&gt;</span>Presidency of, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;nounder&quot;</span> <span class="na">href=</span><span class="s">&quot;ch04.html#page_109&quot;</span><span class="nt">&gt;</span>109<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
</pre></div>


<p>would have a value of <code>['indexsub']</code> for <strong>subentry_classes</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This field is only used for indexes in which there are separate line rather than (or in addition to) inline subentries.  If left blank, the parser will assume that the index <strong>only</strong> contains inline subentries. </p>
</div>
<hr />
<h3 id="xpath_see">xpath_see</h3>
<p><strong>Field Type</strong>: String</p>
<p>Tag type that encloses a "see" indicator in the EPUB. For example, an index with the following entry</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;indexmain&quot;</span><span class="nt">&gt;</span>First President. <span class="nt">&lt;em&gt;</span>See<span class="nt">&lt;/em&gt;</span> Washington, George<span class="nt">&lt;/p&gt;</span>
</pre></div>


<p>would have a value of <code>em</code> for <strong>xpath_see</strong>.</p>
<hr />
<h3 id="xpath_seealso">xpath_seealso</h3>
<p><strong>Field Type</strong>: String</p>
<p>Tag type that enclose a "see also" indicator in the EPUB.  For example, an index with the following entry:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;indexmain&quot;</span><span class="nt">&gt;</span>Early Presidents, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;nounder&quot;</span> <span class="na">href=</span><span class="s">&quot;ch01.html#page_28&quot;</span><span class="nt">&gt;</span>28<span class="nt">&lt;/a&gt;</span>, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;nounder&quot;</span> <span class="na">href=</span><span class="s">&quot;ch01.html#page_31&quot;</span><span class="nt">&gt;</span>31<span class="nt">&lt;/a&gt;</span>. <span class="nt">&lt;em&gt;</span>See also<span class="nt">&lt;/em&gt;</span> Washington, George<span class="nt">&lt;/p&gt;</span>
</pre></div>


<p>would have a value of <code>em</code> for <strong>xpath_seealso</strong>.</p>
<hr />
<h3 id="pagenumber_pre_strings">pagenumber_pre_strings</h3>
<p><strong>Field Type</strong>: Array (String)</p>
<p>When identifying pages in the text, this is the string used to split an entire page to separate into individual pages. The goal is to have each remaining page string begin with the page number, so the split string should include the tag text that occurs right before the page number.  For example, in an EPUB with the following text:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;indent&quot;</span><span class="nt">&gt;</span>Washington was widely admired for his strong leadership qualities and was unanimously elected president by the Electoral College in the first two national elections. He oversaw the creation of a strong, well-financed national government that maintained neutrality in the French Revolutionary Wars, suppressed the Whiskey Rebellion, and won acceptance among Americans of all types.[3] <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">&quot;page_172&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>Washington&#39;s incumbency established many precedents still in use today, such as the cabinet system, the inaugural address, and the title Mr. President.[4][5] His retirement from office after two terms established a tradition that lasted until 1940 when Franklin Delano Roosevelt won an unprecedented third term. The 22nd Amendment (1951) now limits the president to two elected terms.<span class="nt">&lt;/p&gt;</span>
</pre></div>


<p>could have a value of <code>['id="page_']</code> for <strong>pagenumber_pre_strings</strong>.</p>
<p>(Example text from Wikipedia)</p>
<hr />
<h3 id="pagenumber_xpath_pattern">pagenumber_xpath_pattern</h3>
<p><strong>Field Type</strong>: String</p>
<p>An xpath pattern used to find a particular page using xpath in the original text. Any tool using this pattern will use python's string <code>format</code> function to construct the specific xpath pattern for that particular page, and should therefore include the characters <code>{}</code> or <code>{0}</code> where the page number should be inserted. If the page number should be used multiple times in the string, you must use the second version <code>{0}</code>.  So, for example, the text from the <a href="#pagenumber_pre_strings">pagenumber_pre_strings example</a> would have a value of <code>a[@id="page_{0}"]</code> for <strong>pagenumber_xpath_patern</strong>.</p>
<hr />
<h3 id="pagenumber_css_selector_pattern">pagenumber_css_selector_pattern</h3>
<p><strong>Field Type</strong>: String</p>
<p>This field functions much like the <a href="#pagenumber_xpath_pattern">pagenumber_xpath_pattern</a>, but for CSS Selectors instead of Xpath. For example, the same text from the <a href="#pagenumber_pre_strings">pagenumber_pre_strings example</a> would have a value of <code>#page_{0}</code> for <strong>pagenumber_css_selector_pattern</strong>.</p>
<hr />
<h3 id="pagenumber_tag_pattern">pagenumber_tag_pattern</h3>
<p><strong>Field Type</strong>: String</p>
<p>This field functions much like the <a href="#pagenumber_xpath_pattern">pagenumber_xpath_pattern</a>, but instead reconstructs the original page number locator tag as it existed in the original text. For example, the same text from the <a href="#pagenumber_pre_strings">pagenumber_pre_strings example</a> would have a value of <code>&lt;a id="page_{0}"&gt;</code> for <strong>pagenumber_tag</strong>pattern__.</p>
<hr />
<h3 id="separator_between_entry_and_occurrences">separator_between_entry_and_occurrences</h3>
<p><strong>Field Type</strong>: String</p>
<p>Punctuation used to separate entry text from its occurrences (page numbers). For example, the index entry:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;indexmain&quot;</span><span class="nt">&gt;</span>Washington, George, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;nounder&quot;</span> <span class="na">href=</span><span class="s">&quot;ch03.html#page_73&quot;</span><span class="nt">&gt;</span>73<span class="nt">&lt;/a&gt;</span><span class="ni">&amp;#8211;</span>85<span class="nt">&lt;/p&gt;</span>
</pre></div>


<p>Would have a value of <code>,</code> for <strong>separator_between_entry_and_occurrences</strong>.</p>
<hr />
<h3 id="xpath_occurrence_link">xpath_occurrence_link</h3>
<p><strong>Field Type</strong>: String</p>
<p>Xpath used to find occurence (page number) links within an entry. For example, the index entry:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;indexmain&quot;</span><span class="nt">&gt;</span>Washington, George, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;nounder&quot;</span> <span class="na">href=</span><span class="s">&quot;ch03.html#page_73&quot;</span><span class="nt">&gt;</span>73<span class="nt">&lt;/a&gt;</span><span class="ni">&amp;#8211;</span>85<span class="nt">&lt;/p&gt;</span>
</pre></div>


<p>would have a value of <code>a[@href]</code> for <strong>xpath_occurence_link</strong>.</p>
<hr />
<h3 id="separator_before_first_subentry">separator_before_first_subentry</h3>
<p><strong>Field Type</strong>: String</p>
<p>Some indexes with separate line subentries will put the first subentry on the same line as the main entry (particularly if the main entry itself has no occurrences). The punctuation mark in <strong>separator_before_first_subentry</strong> is used to separate between the main entry text and the first subentry text in these instances. For example, the entry</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;indexmain&quot;</span><span class="nt">&gt;&lt;em&gt;</span>Washington, George<span class="nt">&lt;/em&gt;</span>: and Cherry Tree, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;nounder&quot;</span> <span class="na">href=</span><span class="s">&quot;ch02.html#page_74&quot;</span><span class="nt">&gt;</span>74<span class="nt">&lt;/a&gt;</span><span class="ni">&amp;#8211;</span>5;<span class="nt">&lt;/p&gt;</span>
</pre></div>


<p>would have a value of <code>:</code> for <strong>separator_before_first_subentry</strong>.</p>
<hr />
<h3 id="separator_between_subentries">separator_between_subentries</h3>
<p><strong>Field Type</strong>: String</p>
<p>Inline subentries use punctuation to separate between different subentries on the same line: this field holds the punctuation that demarcates a new subentry. For example, the following index text:</p>
<div class="codehilite"><pre><span></span> <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;in&quot;</span><span class="nt">&gt;</span>Adams, Henry, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;xref&quot;</span> <span class="na">href=</span><span class="s">&quot;ump-taylor02-0013.html#p211&quot;</span><span class="nt">&gt;</span>211n83<span class="nt">&lt;/a&gt;</span>; 
    apocalyptic view of the future, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;xref&quot;</span> <span class="na">href=</span><span class="s">&quot;ump-taylor02-0008.html#p60&quot;</span><span class="nt">&gt;</span>60<span class="nt">&lt;/a&gt;</span>, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;xref&quot;</span> <span class="na">href=</span><span class="s">&quot;ump-taylor02-0008.html#p65&quot;</span><span class="nt">&gt;</span>65<span class="nt">&lt;/a&gt;</span>;
    boundary of life and death blurred in, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;xref&quot;</span> <span class="na">href=</span><span class="s">&quot;ump-taylor02-0008.html#p57&quot;</span><span class="nt">&gt;</span>57<span class="nt">&lt;/a&gt;</span>.
<span class="nt">&lt;/p&gt;</span>
</pre></div>


<p>would have a value of <code>:</code> for <strong>separator_between_subentries</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This field is <strong>only</strong> used in indexes with inline subentries.  If this value is left blank, the parser will assume that the index contains only separate line subentries</p>
</div>
<hr />
<h3 id="separator_between_sees">separator_between_sees</h3>
<p><strong>Field Type</strong>: String</p>
<p>Punctuation used to separate multiple "see" targets in an index. For example, the entry </p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;indexsub&quot;</span><span class="nt">&gt;</span>Washington, George, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;nounder&quot;</span> <span class="na">href=</span><span class="s">&quot;ch02.html#page_39&quot;</span><span class="nt">&gt;</span>39<span class="nt">&lt;/a&gt;</span><span class="ni">&amp;#8211;</span>41. 
    <span class="nt">&lt;em&gt;</span>See<span class="nt">&lt;/em&gt;</span> American Presidency; Founding Fathers; Cannot Tell a Lie
<span class="nt">&lt;/p&gt;</span>
</pre></div>


<p>would have a value of <code>;</code> for <strong>separator_between_sees</strong>.</p>
<hr />
<h3 id="separator_see_subentry">separator_see_subentry</h3>
<p><strong>Field Type</strong>: String</p>
<p>A "see" relation might point to a subentry, rather than the main entry of a text.  In those cases, this punctuation is used to indicate the difference between the main entry and subentry text in the target subentry.  For example, in the entry:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;indexmain&quot;</span><span class="nt">&gt;</span>Truthfulness in politics, <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;nounder&quot;</span> <span class="na">href=</span><span class="s">&quot;ch02.html#page_51&quot;</span><span class="nt">&gt;</span>51<span class="nt">&lt;/a&gt;</span><span class="ni">&amp;#8211;</span>52. <span class="nt">&lt;em&gt;</span>See also<span class="nt">&lt;/em&gt;</span> Washington, and Cherry Tree<span class="nt">&lt;/p&gt;</span>
</pre></div>


<p>the target is not the main topic <strong>Washington, and Cherry Tree</strong> but the subentry <strong>and Cherry Tree</strong> of the main entry <strong>Washington</strong>. In this case, the value of <strong>separator_see_subentry</strong> would be <code>,</code>.</p>
<hr />
<h3 id="separator_between_seealsos">separator_between_seealsos</h3>
<p><strong>Field Type</strong>: String</p>
<p>Functions similarly to <a href="#separator_between_sees">separator_between_sees</a>, but with "see also" relations instead of "see" relations.</p>
<hr />
<h3 id="inline_see_start">inline_see_start</h3>
<p><strong>Field Type</strong>: String</p>
<p>Some inline subentry indexes include both multiple subentries <em>and</em> multiple see relations in a single line.  Even worse, sometimes these are separated by exactly the same punctuation. In those situations, the index will wrap the see in certain punctuation, such as parenthesis. When parsing these situations, the index extractor is looking at the content <em>stripped of tags</em>, so for an index with text that looks like this:</p>
<div class="codehilite"><pre><span></span>Washington, George, 8, 9, 18, 24, 89, 94, 101, 102, 172, 180n7, 250n29; and Cherry Tree, 68, 77; Presidency of (see American Presidency; Founding Fathers; Constitution), 7, 20, 101, 110, 164, 169. 
</pre></div>


<p>the value of <strong>inline_see_start</strong> would be <code>(see</code>.</p>
<hr />
<h3 id="inline_see_end">inline_see_end</h3>
<p><strong>Field Type</strong>: String</p>
<p>This field marks the end of a series of "see" relations in an inline subentry index.  Using the same example from <a href="#inline_see_start">inline_see_start</a> above, the value of <strong>inline_see_end</strong> would be <code>)</code>.</p>
<hr />
<h3 id="inline_see_also_start">inline_see_also_start</h3>
<p><strong>Field Type</strong>: String</p>
<p>Functionally equivalent to <a href="#inline_see_start">inline_see_start</a> above, but for "see also" relations.</p>
<hr />
<h3 id="inline_see_also_end">inline_see_also_end</h3>
<p><strong>Field Type</strong>: String</p>
<p>Functionally equivalent to <a href="#inline_see_end">inline_see_end</a> above, but for "see also" relations.</p>
<hr />
<h3 id="indicators_of_occurence_range">indicators_of_occurence_range</h3>
<p><strong>Field Type</strong>: Array (String)</p>
<p>Indexes may express occurrences as a range rather than a single page.  <strong>OTL TCT</strong> extraction, however, only captures the first page, and so this field helps tell the parser to ignore the number at the end of the occurrence range.  However, due to inconsistent formatting, an index may use multiple punctuation types to express a range (for example, both hyphens and em dashes). For such an index, the value of <strong>indicators_of_occurrence_range</strong> might be <code>["-", "–"]</code>.</p>
<hr />
<h3 id="see_split_string">see_split_string</h3>
<p><strong>Field Type</strong>: Array (String)</p>
<p>String that indicates the beginning of a "see" relation.  Because there can be multiple punctuation styles within a given document, the split strings are an array rather than a single option. Like with <a href="#inline_see_start">inline_see_start</a>, the "see" items are extracted with tags removed, just looking at the entry as plain text. So, for an entry with the following text:</p>
<div class="codehilite"><pre><span></span>First President. See Washington, George
</pre></div>


<p>the value of <strong>see_split_string</strong> would be <code>. See</code>.  Note the inclusion of the leading period, which is important for separating a "see" relation from an entry that has the word "See" in it (such as "The Holy See").</p>
<hr />
<h3 id="see_also_split_string">see_also_split_string</h3>
<p>Same as <a href="#see_split_string">see_split_string</a>, but for "see also" relations instead of "see" relations.</p>
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../new/" title="Adding A New EPUB" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Adding A New EPUB
              </span>
            </div>
          </a>
        
        
          <a href="../testing/" title="Testing" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Testing
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-2afe21e0b2.js"></script>
      <script>var config={url:{base:".."}},app=new Application(config);app.initialize()</script>
      
    
    
      
    
  </body>
</html>